{% extends "tours/base.html" %}

{% block content %}
<div class="container-fluid">
  <div class="row search">
    <input type="text" name="" placeholder="Search" id="entry">
  </div>
  <div class="row location" id="TheCut">
    <div class="col-xs-3 small-padding">
      <img class="location-image" src="assets/img/thecut.jpg">
    </div>
    <div class="col-xs-8">
      <h5>The Cut</h5>
      <p>Carnegie Mellon's new student Orientation is an extensive full-week program
that will focus on academics, tradition and community.</p>
    </div>
    <div class="col-xs-1 next">
      <a href="destination.html">></a>
    </div>
  </div>
</div>
{% endblock %}

{% block javascript %}
<script type="text/javascript">
jQuery.expr[':'].regex = function(elem, index, match) {
    var matchParams = match[3].split(','),
        validLabels = /^(data|css):/,
        attr = {
            method: matchParams[0].match(validLabels) ? 
                        matchParams[0].split(':')[0] : 'attr',
            property: matchParams.shift().replace(validLabels,'')
        },
        regexFlags = 'ig',
        regex = new RegExp(matchParams.join('').replace(/^s+|s+$/g,''), regexFlags);
    return regex.test(jQuery(elem)[attr.method](attr.property));
}

$(function () {
    
    var input = $("#entry");
    input.keydown(function () {

        setTimeout(function () {
            var inputs = input.val().toLowerCase();
            var query = inputs.replace(" ","_");
            console.log(query)
            if (query == 'NaN') {
                $('.location').show();
            } else {    
                $('.location').hide()
                $('.location:regex(id,'+query+')').show();
            }
        }, 10);
        
    });
});
</script>
{% endblock %}